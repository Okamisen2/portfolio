<!DOCTYPE html>
<!-- The 'lang' attribute specifies the primary language of the document's content. -->
<html lang="en">
<head>
    <!-- Specifies the character encoding for the document. UTF-8 is the standard. -->
    <meta charset="UTF-8">
    <!-- Ensures the page is responsive and scales correctly on different devices. -->
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <!-- The title of the webpage, displayed in the browser tab. -->
    <title>Portfolio | Arthur Fiodarav - Technical Artist</title>
    
    <!-- Scripts & Stylesheets -->
    <!-- Tailwind CSS: A utility-first CSS framework for rapid UI development. -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Google Fonts: For importing custom fonts. -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
    <!-- Font Awesome: For icons (like play, pause, etc.). -->
    <link rel='stylesheet' href='https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.2/css/all.min.css'>
    
    <!-- Internal CSS Styles -->
    <style>
        /*
         * CSS Custom Properties (Variables)
         * These are defined in the :root scope, making them globally available.
         * This is great for theming and maintaining consistency.
         */
        :root {
            --sheen-speed: 4s;
            --angle: 0deg;
            --mask-size: 100%;
            /* Custom property for audio intensity, controlled by JS */
            --audio-intensity: 0.5; 
        }

        /* General body styling */
        body {
            font-family: 'Inter', sans-serif; /* Sets the default font for the page. */
            background-color: #030712; /* A very dark gray, almost black. */
            color: #d1d5db; /* A light gray for text, providing good contrast. */
        }

        /* --- Reusable Component Styles --- */

        .section-title {
            font-size: 2.25rem; /* Large text for section headings. */
            font-weight: 800; /* Extra bold font weight. */
            color: #ffffff; /* White color for high visibility. */
            margin-bottom: 2rem; /* Space below the title. */
            text-align: center; /* Center-aligns the text. */
            letter-spacing: -0.025em; /* Slightly reduces space between characters. */
        }

        .project-title {
            font-size: 2.5rem;
            font-weight: 800;
            color: #ffffff;
            margin-bottom: 0.5rem;
        }
        
        /* Style for the glass-like feature cards */
        .feature-card {
            background-color: rgba(31, 41, 55, 0.5); /* Semi-transparent dark gray. */
            border: 1px solid #374151; /* A subtle border. */
            backdrop-filter: blur(8px); /* This creates the "frosted glass" effect by blurring content behind it. */
            transition: all 0.3s; /* Smooth transition for hover effects. */
            height: 100%; /* Ensures cards in the same row have equal height. */
        }

        .feature-card:hover {
            background-color: rgba(55, 65, 81, 0.7); /* Darkens the card on hover. */
            border-color: #93c5fd; /* Highlights the border with a light blue. */
            transform: translateY(-5px); /* Lifts the card slightly on hover. */
        }

        .tag {
            background-color: #3b82f6; /* Blue background for tags. */
            color: #ffffff;
            font-size: 0.75rem;
            font-weight: 600;
            padding: 4px 10px;
            border-radius: 9999px; /* Creates a "pill" shape. */
            text-transform: uppercase;
            display: inline-block;
            margin-bottom: 4px;
        }

        /* --- Video & Image Container Styles --- */

        /* A container that maintains a 16:9 aspect ratio for videos. */
        .video-container {
            position: relative; /* Required for absolute positioning of children. */
            width: 100%;
            padding-top: 56.25%; /* This is the magic for 16:9 aspect ratio (9 / 16 * 100). */
            background-color: #000;
            border-radius: 0.75rem;
            overflow: hidden; /* Hides anything that goes outside the rounded corners. */
            border: 2px solid #374151;
            box-shadow: 0 20px 25px -5px rgb(0 0 0 / 0.2), 0 8px 10px -6px rgb(0 0 0 / 0.2);
        }

        /* Makes the iframe or video fill its container. */
        .video-container iframe,
        .video-container video {
            position: absolute; /* Positions it relative to the .video-container. */
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            object-fit: cover; /* Ensures the video covers the area without distortion. */
        }

        /* Similar to video-container, but for a 4:3 aspect ratio, common for images. */
        .image-container {
            position: relative;
            width: 100%;
            padding-top: 75%; /* 4:3 Aspect Ratio (3 / 4 * 100). */
            background-color: #111827;
            border-radius: 0.5rem;
            overflow: hidden;
            border: 1px solid #374151;
            transition: transform 0.3s;
        }
        
        .gallery-item {
            cursor: pointer;
            position: relative; /* Needed for positioning the texture map overlays. */
        }

        .gallery-item:hover .image-container {
            transform: scale(1.05); /* Slightly zooms into the image on hover. */
        }
        
        .image-container img {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        /* --- CV & Layout Styles --- */

        .divider {
            border-color: #374151;
            margin-top: 4rem;
            margin-bottom: 4rem;
        }

        .cv-card {
            background-color: rgba(17, 24, 39, 0.8);
            border: 1px solid #374151;
            padding: 1.5rem;
            border-radius: 0.75rem;
            height: 100%;
        }
        .cv-card h3 {
            font-size: 1.25rem;
            font-weight: 700;
            color: #ffffff;
            margin-bottom: 1rem;
        }
        
        /* --- Language Switcher Styles --- */
        .lang-switcher button {
            padding: 8px 12px;
            border-radius: 8px;
            background-color: #374151;
            color: #d1d5db;
            transition: background-color 0.2s;
        }
        .lang-switcher button.active {
            background-color: #3b82f6;
            color: white;
            font-weight: bold;
        }
        /* Hide English elements by default, JS will toggle them. */
        [data-lang-en] { display: none; }

        /* --- Lightbox (Image Popup) Styles --- */
        #lightbox {
            transition: opacity 0.3s ease;
        }
        #lightbox-image {
            transition: transform 0.3s ease;
        }

        /* --- Video Lazy Loading Placeholder Styles --- */
        .video-placeholder .video-thumbnail {
            width: 100%;
            height: 100%;
            object-fit: cover;
            transition: transform 0.3s ease;
            position: absolute;
            top: 0;
            left: 0;
        }
        .video-placeholder:hover .video-thumbnail {
            transform: scale(1.05);
        }
        .video-placeholder .play-button {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 60px;
            height: 60px;
            background-color: rgba(0, 0, 0, 0.6);
            border-radius: 50%;
            display: flex;
            justify-content: center;
            align-items: center;
            pointer-events: none; /* Allows clicks to pass through to the container. */
            transition: background-color 0.3s ease;
        }
        /* Creates the triangle "play" icon using CSS borders. */
        .video-placeholder .play-button::after {
            content: '';
            display: block;
            width: 0;
            height: 0;
            border-style: solid;
            border-width: 12px 0 12px 20px;
            border-color: transparent transparent transparent white;
            margin-left: 4px;
        }
        .video-placeholder:hover .play-button {
            background-color: rgba(255, 0, 0, 0.8); /* Changes to a YouTube-like red on hover. */
        }

        /* --- Texture Maps Overlay Styles --- */
        .texture-maps-container {
            position: absolute;
            bottom: 1rem;
            left: 1rem;
            right: 1rem;
            display: flex;
            gap: 0.5rem;
            justify-content: center;
        }
        .texture-map {
            width: 15%;
            aspect-ratio: 1 / 1; /* Ensures the map previews are square. */
            border-radius: 0.25rem;
            overflow: hidden;
            border: 2px solid rgba(255, 255, 255, 0.5);
            opacity: 0.5;
            transform: scale(1);
            transition: all 0.3s ease;
            cursor: pointer;
        }
        .texture-map img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }
        .texture-map:hover {
            opacity: 1;
            transform: scale(1.1);
            z-index: 10; /* Brings the hovered map to the front. */
        }

        /* --- Lazy Loading Image Styles --- */
        /* Start with a blurred, slightly zoomed-in image. */
        .lazy-image {
            filter: blur(20px);
            transform: scale(1.1);
            transition: filter 0.5s ease-out, transform 0.5s ease-out;
        }
        /* When the 'loaded' class is added by JS, transition to a sharp, normal-sized image. */
        .lazy-image.loaded {
            filter: blur(0);
            transform: scale(1);
        }
        
        /* --- UPDATED MUSIC PLAYER STYLES --- */
        .music-player-wrapper {
            display: flex;
            flex-direction: column;
            align-items: center;
            width: 100%;
            max-width: 900px;
            margin: 0 auto;
            position: relative;
        }

        .music-container {
            background-color: rgba(17, 24, 39, 0.8);
            border: 1px solid #374151;
            border-radius: 1rem;
            box-shadow: 0 10px 20px rgba(0,0,0,0.19), 0 6px 6px rgba(0,0,0,0.23);
            display: flex;
            align-items: center;
            padding: 0;
            position: relative;
            z-index: 90;
            width: 100%;
            height: 90px;
            overflow: visible; 
        }

        /* Soft edge overlay for the player */
        .music-container::after {
            content: '';
            position: absolute;
            top: 0; left: 0; right: 0; bottom: 0;
            border-radius: 1rem;
            box-shadow: inset 0 0 15px 10px #030712;
            pointer-events: none;
            z-index: 15; /* Make sure it's above the background but below controls */
            overflow: visible; 
        }
        
        /* Main album art disc */
        .img-container {
            position: absolute;
            width: 150px; /* Increased size */
            height: 150px; /* Increased size */
            left: -25px; /* Adjusted for overflow */
            top: 50%;
            transform: translateY(-50%);
            z-index: 90; /* Above background effect */
            border-radius: 50%;
            overflow: visible; 
        }

        .img-container img {
            width: 100%;
            height: 100%;
            border-radius: 50%;
            object-fit: cover;
            animation: rotateImage 20s linear infinite; 
            animation-play-state: paused;
            border: 3px solid #374151;
            box-shadow: 0 5px 15px rgba(0,0,0,0.3);
            transition: opacity 0.5s ease-out, filter 0.5s ease-out; /* Added for crossfade */
        }
        
        .music-container.play .img-container img,
        .music-container.play .background-effect img {
            animation-play-state: running;
        }

        @keyframes rotateImage {
            from { transform: rotate(0deg); }
            to { transform: rotate(360deg); }
        }

        .img-container::after {
            content: '';
            background-color: #030712;
            border: 2px solid #374151;
            border-radius: 50%;
            position: absolute;
            top: 50%;
            left: 50%;
            width: 15px;
            height: 15px;
            transform: translate(-50%, -50%);
            z-index: 14;
        }

        /* Background effect styles */
        .background-effect {
            position: absolute;
            top: 0; left: 0;
            width: 100%;
            height: 100%;
            z-index: 5;
            pointer-events: none;
            overflow: hidden; /* Ensure the large image doesn't break layout */
            border-radius: 1rem;
        }

        .background-effect img {
            position: absolute;
            width: 400%;
            height: 400%;
            top: 50%;
            left: 50%;
            transform-origin: center center;
            object-fit: cover;
            filter: blur(40px);
            mix-blend-mode: soft-light;
            opacity: var(--audio-intensity);
            animation: rotateImage-bg 20s linear infinite;
            animation-play-state: paused;
            transition: opacity 1s ease-out, filter 1.5s ease-out;
        }
        
        @keyframes rotateImage-bg {
            from { transform: translate(-50%, -50%) rotate(0deg); }
            to { transform: translate(-50%, -50%) rotate(360deg); }
        }

        /* Classes for song change transition */
        .cover-fade {
            opacity: 0 !important;
            filter: blur(20px) !important;
        }
        .cover-bg-fade {
            opacity: 0 !important;
            filter: blur(80px) !important;
        }

        /* Re-structured player controls */
        .player-controls {
            display: flex;
            flex-direction: column;
            justify-content: center; /* Vertically center content */
            align-items: center; /* Horizontally center content */
            width: 100%;
            height: 100%;
            padding-left: 110px; /* Make space for the overflowing cover */
            z-index: 20; /* Keep controls on top */
        }

        .music-info h2 {
            position: static;
            width: 100%;
            font-weight: bold;
            text-align: center;
            font-size: 20px;
            margin-bottom: 0px; /* Space between title and progress bar */
        }

        #progress-container {
            background-color: rgba(55, 65, 81, 0.5);
            border-radius: 2px;
            cursor: pointer;
            height: 2px; /* Slightly thicker */
            width: 80%; /* Control width */
            position: relative;
            margin-bottom: 0px; /* Space between progress and controls */
        }

        #progress {
            background-color: #3b82f6;
            border-radius: 2px;
            height: 100%;
            width: 0%;
            transition: width 0.4s linear;
        }
        
        .navigation {
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        .action-btn {
            background-color: transparent;
            border: 0;
            color: #d1d5db;
            font-size: 18px; /* Slightly smaller */
            cursor: pointer;
            padding: 0px;
            margin: 0 15px;
            transition: color 0.3s;
        }
        .action-btn:focus {
            outline: none;
        }
        .action-btn.action-btn-big {
            font-size: 28px; /* Slightly smaller */
        }
        .action-btn:hover, .action-btn.action-btn-big:hover {
            color: #3b82f6;
        }
        
        /* --- Game Styles (No Changes) --- */
        #game-container {
            position: relative;
            width: 100%;
            max-width: 800px;
            margin: 0 auto;
            border: 2px solid #374151;
            border-radius: 0.75rem;
            overflow: hidden;
        }
        #game-canvas {
            display: block;
            width: 100%;
            background-color: #111827;
        }
        #game-score {
            position: absolute;
            top: 10px;
            left: 10px;
            color: white;
            font-size: 1.5rem;
            font-weight: bold;
            text-shadow: 1px 1px 2px black;
        }
        #game-message {
            position: absolute;
            top: 20%;
            left: 50%;
            transform: translateX(-50%);
            color: #3b82f6;
            font-size: 2rem;
            font-weight: bold;
            text-shadow: 2px 2px 4px black;
            opacity: 0;
            transition: opacity 0.5s;
            text-align: center;
        }
    </style>
</head>
<body class="p-4 sm:p-8">

    <!-- Main container for the page content, centered and with a max width. -->
    <div class="max-w-7xl mx-auto">

        <!-- HEADER / CV SECTION -->
        <header class="mb-16">
            <div class="relative text-center mb-10">
                <div class="absolute top-0 right-0 lang-switcher">
                    <button id="lang-ru">RU</button>
                    <button id="lang-en" class="active">EN</button>
                </div>
                <div class="flex justify-center items-center gap-8 flex-wrap">
                    <div class="w-32 h-32 md:w-40 md:h-40 rounded-full overflow-hidden border-4 border-gray-700" style="filter: grayscale(100%);">
                        <img data-lang-ru src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-src="img/main_photo.png" alt="Фото Артура Фёдорова" class="lazy-image w-full h-full object-cover">
                        <img data-lang-en src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-src="img/main_photo.png" alt="Photo of Artur Fiodarav" class="lazy-image w-full h-full object-cover">
                    </div>
                    <div>
                        <h1 class="text-5xl md:text-7xl font-extrabold text-white">
                            <span data-lang-ru>Фёдоров Артур</span>
                            <span data-lang-en>Arthur Fiodarav</span>
                        </h1>
                        <h2 class="text-2xl md:text-3xl text-blue-400 font-medium mt-2">Technical Artist</h2>
                    </div>
                </div>
                 <p class="mt-6 text-2xl text-gray-300 font-light italic">
                      <span data-lang-ru>"Играл в игры, писал про игры, продавал игры, продвигал игры — теперь их создаю!"</span>
                      <span data-lang-en>"Played games, wrote about games, sold games, promoted games - now I create them!"</span>
                 </p>
            </div>
            
            <!-- CV Grid Layout -->
            <div class="grid grid-cols-1 lg:grid-cols-3 gap-6 mb-8">
                <!-- Work Experience Card -->
                <div class="cv-card lg:col-span-2">
                    <h3>
                        <span data-lang-ru>Опыт работы</span>
                        <span data-lang-en>Work Experience</span>
                    </h3>
                    <ol class="relative border-l border-gray-700">                  
                        <li class="mb-10 ml-4">
                            <div class="absolute w-3 h-3 bg-gray-700 rounded-full mt-1.5 -left-1.5 border border-gray-900"></div>
                            <time class="mb-1 text-sm font-normal leading-none text-gray-500">2020 - 2025</time>
                            <h4 class="text-lg font-semibold text-white">
                                <span data-lang-ru>Freelance 3D/2D Generalist & Tech Artist</span>
                                <span data-lang-en>Freelance 3D/2D Generalist & Tech Artist</span>
                            </h4>
                            <p class="text-base font-normal text-gray-400">
                                <span data-lang-ru>VFX, шейдеры, материалы, SFX, подготовка к релизам на Steam/PS Store, организация тестирований.</span>
                                <span data-lang-en>VFX, shaders, materials, SFX, preparing for Steam/PS Store releases, organizing testing sessions.</span>
                            </p>
                        </li>
                        <li class="mb-10 ml-4">
                            <div class="absolute w-3 h-3 bg-gray-700 rounded-full mt-1.5 -left-1.5 border border-gray-900"></div>
                            <time class="mb-1 text-sm font-normal leading-none text-gray-500">2011 - 2020</time>
                            <h4 class="text-lg font-semibold text-white">
                                <span data-lang-ru>Руководитель видеоигрового отдела, OZ.by</span>
                                <span data-lang-en>Head of Video Game Department, OZ.by</span>
                            </h4>
                            <p class="text-base font-normal text-gray-400">
                                <span data-lang-ru>Управлял полным циклом игрового направления: от переговоров с Nintendo и Blizzard до организации национальных киберспортивных турниров. Получил глубокое понимание рынка и жизненного цикла продукта.</span>
                                <span data-lang-en>Managed the full cycle of the gaming division: from negotiations with Nintendo and Blizzard to organizing national esports tournaments. Gained a deep understanding of the market and product lifecycle.</span>
                            </p>
                        </li>
                        <li class="ml-4">
                            <div class="absolute w-3 h-3 bg-gray-700 rounded-full mt-1.5 -left-1.5 border border-gray-900"></div>
                            <time class="mb-1 text-sm font-normal leading-none text-gray-500">2008 - 2011</time>
                            <h4 class="text-lg font-semibold text-white">
                                <span data-lang-ru>Копирайтер, Etxt</span>
                                <span data-lang-en>Copywriter, Etxt</span>
                            </h4>
                            <p class="text-base font-normal text-gray-400">
                                <span data-lang-ru>Начинал путь в индустрии с написания обзоров и гайдов, глубоко изучая игровые механики и то, что цепляет игроков.</span>
                                <span data-lang-en>Started my journey in the industry by writing reviews and guides, deeply studying game mechanics and what engages players.</span>
                            </p>
                        </li>
                    </ol>
                </div>
                <!-- About Me Card -->
                <div class="cv-card">
                    <h3>
                        <span data-lang-ru>Обо мне</span>
                        <span data-lang-en>About Me</span>
                    </h3>
                    <div>
                        <p class="text-lg text-gray-300 mb-4">
                            <span data-lang-ru>Увлеченный специалист, который верит, что элегантные технические решения и креативный подход — ключ к созданию незабываемого игрового опыта. А ещё:</span>
                            <span data-lang-en>An enthusiastic specialist who believes that elegant technical solutions and a creative approach are the key to creating an unforgettable gaming experience. Also:</span>
                        </p>
                        <div>
                            <img data-lang-ru src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-src="img/NodesRu.gif" class="lazy-image w-full rounded-lg" alt="I like nodes gif">
                            <img data-lang-en src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-src="img/Nodes.gif" class="lazy-image w-full rounded-lg" alt="I like nodes gif">
                        </div>
                    </div>
                </div>
                <!-- Key Skills Card -->
                <div class="cv-card">
                    <h3>
                        <span data-lang-ru>Ключевые навыки</span>
                        <span data-lang-en>Key Skills</span>
                    </h3>
                    <div class="space-y-3">
                        <div>
                            <h4 class="font-semibold text-blue-300">
                                <span data-lang-ru>Основное</span>
                                <span data-lang-en>Core</span>
                            </h4>
                            <p><span class="tag">Unity</span> <span class="tag">C#</span> <span class="tag">C++ (basic)</span> <span class="tag">ShaderGraph</span> <span class="tag">VFXGraph</span> <span class="tag">SFX</span></p>
                        </div>
                        <div>
                            <h4 class="font-semibold text-blue-300">
                                <span data-lang-ru>Арт-инструменты</span>
                                <span data-lang-en>Art Tools</span>
                            </h4>
                            <p><span class="tag">Substance Designer</span> <span class="tag">Blender</span> <span class="tag">Photoshop</span> <span class="tag">Krita</span> <span class="tag">PixelCreator</span> <span class="tag">Aseprite</span></p>
                        </div>
                        <div>
                            <h4 class="font-semibold text-blue-300">
                                <span data-lang-ru>Аудио</span>
                                <span data-lang-en>Audio</span>
                            </h4>
                            <p><span class="tag">FMOD</span> <span class="tag">Adobe Audition</span> <span class="tag">FLStudio</span></p>
                        </div>
                         <div>
                            <h4 class="font-semibold text-blue-300">
                                <span data-lang-ru>Языки</span>
                                <span data-lang-en>Languages</span>
                            </h4>
                            <p><span class="tag">Русский (Родной)</span> <span class="tag">English B2</span></p>
                        </div>
                    </div>
                </div>
                <!-- Education Card -->
                <div class="cv-card">
                    <h3>
                        <span data-lang-ru>Образование и Обучение</span>
                        <span data-lang-en>Education & Training</span>
                    </h3>
                    <div class="space-y-4">
                        <div>
                            <h4 class="font-semibold text-white">
                                <span data-lang-ru>БГЭУ, Экономист-информатик</span>
                                <span data-lang-en>BSEU, Economist-Informatics</span>
                            </h4>
                            <p class="text-gray-400">
                                <span data-lang-ru>Сильная база в математике, статистике и аналитике, помогающая в программировании и оптимизации.</span>
                                <span data-lang-en>Strong foundation in mathematics, statistics, and analytics, which aids in programming and optimization.</span>
                            </p>
                        </div>
                        <div>
                            <h4 class="font-semibold text-white">
                                <span data-lang-ru>Специализированные курсы</span>
                                <span data-lang-en>Specialized Courses</span>
                            </h4>
                            <p class="text-gray-400">
                                <span data-lang-ru>Множество углубленных курсов по Blender, Unity, C#, написанию шейдеров, VFX, работе со светом и FMOD.</span>
                                <span data-lang-en>Numerous in-depth courses on Blender, Unity, C#, shader writing, VFX, lighting, and FMOD.</span>
                            </p>
                        </div>
                    </div>
                </div>
                <!-- Printable Version Card -->
                 <div class="cv-card">
                      <h3>
                           <span data-lang-ru>Версия для печати</span>
                           <span data-lang-en>Printable Version</span>
                      </h3>
                      <div class="h-full flex flex-col justify-between">
                           <p class="text-lg text-gray-300 mb-4">
                                <span data-lang-ru>Для вашего удобства я подготовил краткую версию этого портфолио в формате PDF.</span>
                                <span data-lang-en>For your convenience, I have prepared a brief version of this portfolio in PDF format.</span>
                           </p>
                           <a id="pdf-download-link" href="PATH_TO_YOUR_EN_PDF.pdf" target="_blank" class="mt-auto block text-center w-full bg-blue-600 hover:bg-blue-700 text-white font-bold py-3 px-4 rounded-lg transition-colors">
                                <span data-lang-ru>Скачать PDF</span>
                                <span data-lang-en>Download PDF</span>
                           </a>
                      </div>
                 </div>
            </div>
             <!-- Contact Links -->
             <div class="mt-8 flex justify-center gap-x-6 gap-y-3 flex-wrap text-lg">
                 <a href="mailto:okamisen@yandex.ru" class="text-white hover:text-blue-400">okamisen@yandex.ru</a>
                 <span class="text-gray-500">|</span>
                 <a href="https://www.linkedin.com/in/v-v-15362034a/" target="_blank" class="text-white hover:text-blue-400">LinkedIn</a>
                  <span class="text-gray-500">|</span>
                  <a href="https://t.me/Okamisen" target="_blank" class="text-white hover:text-blue-400">Telegram</a>
                  <span class="text-gray-500">|</span>
                 <span class="text-white">
                      <span data-lang-ru>Беларусь, Минск</span>
                      <span data-lang-en>Minsk, Belarus</span>
                 </span>
             </div>
        </header>

        <!-- MAIN CONTENT (PROJECTS) -->
        <main>
            <h2 class="section-title">
                <span data-lang-ru>Личные проекты</span>
                <span data-lang-en>Personal Projects</span>
            </h2>

            <!-- PROJECT: Too Late for Valhalla -->
            <section class="mb-16">
                <div class="text-center mb-8">
                    <h3 class="project-title">Too Late for Valhalla</h3>
                    <p class="text-xl text-gray-400 max-w-4xl mx-auto">
                        <strong class="text-blue-300" data-lang-ru>Ключевая задача:</strong>
                        <strong class="text-blue-300" data-lang-en>Core Task:</strong>
                        <span data-lang-ru>Создать аудио-центричную архитектуру, где музыкальный трек в FMOD является "дирижером", управляющим геймплеем, генерацией уровней, шейдерами и UI.</span>
                        <span data-lang-en>To create an audio-centric architecture where the FMOD music track acts as a "conductor," controlling gameplay, level generation, shaders, and UI.</span>
                    </p>
                </div>
                <div class="video-container mb-8 video-placeholder" data-video-ids="94KlTkUudzQ">
                    <img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-src="https://img.youtube.com/vi/94KlTkUudzQ/hqdefault.jpg" alt="Too Late for Valhalla Preview" class="lazy-image video-thumbnail">
                    <div class="play-button"></div>
                </div>
                <!-- Feature Cards Grid -->
                <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
                    <div class="feature-card p-6 rounded-xl">
                        <h4 class="font-bold text-lg text-blue-300 mb-2">
                             <span data-lang-ru>1. Аудио-реактивность на DSP</span>
                             <span data-lang-en>1. DSP-Based Audio Reactivity</span>
                        </h4>
                        <p>
                             <span data-lang-ru>Система анализа звука в реальном времени через DSP с FFT. "Энергия" музыки управляет Post-FX, тряской камеры и параметрами шейдеров.</span>
                             <span data-lang-en>A real-time audio analysis system using DSP with FFT. The music's "energy" controls Post-FX, camera shake, and shader parameters.</span>
                        </p>
                    </div>
                    <div class="feature-card p-6 rounded-xl">
                        <h4 class="font-bold text-lg text-blue-300 mb-2">
                             <span data-lang-ru>2. Процедурная анимация караоке</span>
                             <span data-lang-en>2. Procedural Karaoke Animation</span>
                        </h4>
                        <p>
                             <span data-lang-ru>Полноценный аниматор текста, управляемый из FMOD через timeline-маркеры. Анимирует десятки параметров материала (`AnimationCurve`).</span>
                             <span data-lang-en>A full-fledged text animator controlled by FMOD via timeline markers, animating dozens of material parameters with `AnimationCurve`.</span>
                        </p>
                    </div>
                    <div class="feature-card p-6 rounded-xl">
                        <h4 class="font-bold text-lg text-blue-300 mb-2">
                             <span data-lang-ru>3. Динамическая генерация уровней</span>
                             <span data-lang-en>3. Dynamic Level Generation</span>
                        </h4>
                        <p>
                             <span data-lang-ru>Бесконечный раннер, где структура и сложность уровня полностью синхронизированы с FMOD-маркерами в музыкальной композиции.</span>
                             <span data-lang-en>An endless runner where the level structure and difficulty are fully synchronized with FMOD markers in the music track.</span>
                        </p>
                    </div>
                    <div class="feature-card p-6 rounded-xl">
                        <h4 class="font-bold text-lg text-blue-300 mb-2">
                             <span data-lang-ru>4. Комплексный процедурный шейдер воды</span>
                             <span data-lang-en>4. Complex Procedural Water Shader</span>
                        </h4>
                        <p>
                             <span data-lang-ru>Шейдер воды, управляемый через систему состояний. Плавно переключается между состояниями ("меню", "геймплей"), меняя десятки параметров.</span>
                             <span data-lang-en>A state-driven water shader that smoothly transitions between states ("menu," "gameplay"), changing dozens of parameters.</span>
                        </p>
                    </div>
                    <div class="feature-card p-6 rounded-xl">
                        <h4 class="font-bold text-lg text-blue-300 mb-2">
                             <span data-lang-ru>5. Кастомный Post-Processing в URP</span>
                             <span data-lang-en>5. Custom Post-Processing in URP</span>
                        </h4>
                        <p>
                             <span data-lang-ru>Собственный `ScriptableRendererFeature`, который инъецирует полноэкранный шейдер в URP. Параметры контролируются состоянием игрока, событиями и музыкой.</span>
                             <span data-lang-en>A custom `ScriptableRendererFeature` that injects a fullscreen shader into URP. Parameters are controlled by player state, events, and music.</span>
                        </p>
                    </div>
                    <div class="feature-card p-6 rounded-xl">
                        <h4 class="font-bold text-lg text-blue-300 mb-2">
                             <span data-lang-ru>6. Глубокая интеграция камеры и UI</span>
                             <span data-lang-en>6. Deep Camera & UI Integration</span>
                        </h4>
                        <p>
                             <span data-lang-ru>Живая, отзывчивая система обратной связи. Камера использует стейт-машину Cinemachine и `Impulse`, а UI — объект с кастомным шейдером.</span>
                             <span data-lang-en>A living, responsive feedback system. The camera uses a Cinemachine state machine and `Impulse`, while the UI is an object with a custom shader.</span>
                        </p>
                    </div>
                     <div class="feature-card p-6 rounded-xl md:col-span-2 lg:col-span-3">
                          <h4 class="font-bold text-lg text-blue-300 mb-2">
                               <span data-lang-ru>7. Динамический саундтрек и процедурная генерация SFX</span>
                               <span data-lang-en>7. Dynamic Soundtrack & Procedural SFX</span>
                          </h4>
                          <p>
                               <span data-lang-ru>Продвинутая звуковая система. В реальном времени управляет количеством музыкальных слоев. SFX урона и подбора еды генерируются процедурно через фильтры и наложение слоев, что гарантирует уникальность каждого звука.</span>
                               <span data-lang-en>An advanced sound system. It controls the number of music layers in real-time. Damage and item pickup SFX are generated procedurally via filters and layer blending, ensuring each sound is unique.</span>
                          </p>
                     </div>
                </div>
                <!-- Shader Showcase -->
                <div class="mt-8 space-y-6">
                    <h4 class="text-xl font-bold text-center text-white">
                        <span data-lang-ru>Шейдеры</span>
                        <span data-lang-en>Shaders</span>
                    </h4>
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                        <div class="video-container video-placeholder" data-video-ids="x3PraWAXz_0">
                            <img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-src="https://img.youtube.com/vi/x3PraWAXz_0/hqdefault.jpg" alt="Shader Preview 1" class="lazy-image video-thumbnail">
                            <div class="play-button"></div>
                        </div>
                        <div class="gallery-item">
                            <div class="image-container" style="padding-top: 56.25%;"><img class="lazy-image" src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-src="img/SH1_Energy.png" alt="Изображение проекта Valhalla 1"></div>
                        </div>
                    </div>
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                         <div class="video-container video-placeholder" data-video-ids="lp7c6l9emQ0">
                            <img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-src="https://img.youtube.com/vi/lp7c6l9emQ0/hqdefault.jpg" alt="Shader Preview 2" class="lazy-image video-thumbnail">
                            <div class="play-button"></div>
                        </div>
                        <div class="gallery-item">
                            <div class="image-container" style="padding-top: 56.25%;"><img class="lazy-image" src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-src="img/SH2_Water.png" alt="Изображение проекта Valhalla 2"></div>
                        </div>
                    </div>
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                         <div class="video-container video-placeholder" data-video-ids="oBYO5QTS890">
                            <img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-src="https://img.youtube.com/vi/oBYO5QTS890/hqdefault.jpg" alt="Shader Preview 3" class="lazy-image video-thumbnail">
                            <div class="play-button"></div>
                        </div>
                        <div class="gallery-item">
                            <div class="image-container" style="padding-top: 56.25%;"><img class="lazy-image" src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-src="img/SH3_Vignette.png" alt="Изображение проекта Valhalla 2"></div>
                        </div>
                    </div>                      
                </div>
            </section>
            
            <hr class="divider">

            <!-- PROJECT: HOLODOG -->
            <section class="mb-16">
                 <div class="text-center mb-8">
                      <h3 class="project-title">HOLODOG</h3>
                      <p class="text-xl text-gray-400 max-w-4xl mx-auto">
                           <strong class="text-blue-300" data-lang-ru>Ключевая задача:</strong>
                           <strong class="text-blue-300" data-lang-en>Core Task:</strong>
                           <span data-lang-ru>Создать полностью модульную, управляемую физикой систему процедурной анимации для 2D-меха, позволяющую "собирать" персонажа из независимых частей по рецепту.</span>
                           <span data-lang-en>To create a fully modular, physics-driven procedural animation system for a 2D mech, allowing character assembly from independent parts based on a recipe.</span>
                      </p>
                 </div>
                 <div class="video-container mb-8 video-placeholder" data-video-ids="hSL2H4MMssM">
                    <img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-src="https://img.youtube.com/vi/hSL2H4MMssM/hqdefault.jpg" alt="HOLODOG Preview" class="lazy-image video-thumbnail">
                    <div class="play-button"></div>
                 </div>
                 <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
                       <div class="feature-card p-6 rounded-xl">
                           <h4 class="font-bold text-lg text-blue-300 mb-2">
                                 <span data-lang-ru>1. Модульная процедурная анимация</span>
                                 <span data-lang-en>1. Modular Procedural Animation</span>
                           </h4>
                           <p>
                                 <span data-lang-ru>Создана система, позволяющая собирать мех "по рецепту". Ядро `ChassisController` через события управляет модулями: процедурной локомоцией, кастомным IK для рук, физикой отдачи и `JiggleBone`.</span>
                                 <span data-lang-en>A system for assembling a mech "by recipe". The `ChassisController` core manages modules via events: procedural locomotion, custom arm IK, physics-based kickback, and `JiggleBone`.</span>
                           </p>
                      </div>
                       <div class="feature-card p-6 rounded-xl">
                           <h4 class="font-bold text-lg text-blue-300 mb-2">
                                 <span data-lang-ru>2. Продвинутый 2D-шейдер освещения</span>
                                 <span data-lang-en>2. Advanced 2D Lighting Shader</span>
                           </h4>
                           <p>
                                 <span data-lang-ru>Разработан шейдер, формирующий собственную систему освещения, смешивая до двух источников света через режимы Overlay, Hard Light и Burn для создания сложного стилизованного 2D-освещения.</span>
                                 <span data-lang-en>A custom shader that forms its own lighting system, blending up to two light sources using Overlay, Hard Light, and Burn modes to create complex, stylized 2D lighting.</span>
                           </p>
                      </div>
                       <div class="feature-card p-6 rounded-xl">
                           <h4 class="font-bold text-lg text-blue-300 mb-2">
                                 <span data-lang-ru>3. Эффективная кастомизация</span>
                                 <span data-lang-en>3. Efficient Customization</span>
                           </h4>
                           <p>
                                 <span data-lang-ru>Реализована система `MaterialOverrideController`, позволяющая на лету через `MaterialPropertyBlock` изменять параметры шейдера для отдельных частей, не создавая новых экземпляров материала.</span>
                                 <span data-lang-en>Implemented `MaterialOverrideController` to change shader parameters on-the-fly for individual parts via `MaterialPropertyBlock`, avoiding new material instances.</span>
                           </p>
                      </div>
                       <div class="feature-card p-6 rounded-xl">
                           <h4 class="font-bold text-lg text-blue-300 mb-2">
                                 <span data-lang-ru>4. Динамический шейдерный щит</span>
                                 <span data-lang-en>4. Dynamic Shader Shield</span>
                           </h4>
                           <p>
                                 <span data-lang-ru>Эффект энергетического щита с имитацией объема на 2D-спрайте. Шейдер анализирует карту глубины и процедурно рассчитывает нормали, позволяя щиту корректно реагировать на свет.</span>
                                 <span data-lang-en>An energy shield effect that fakes volume on a 2D sprite. The shader analyzes the depth map and procedurally calculates normals, allowing it to react correctly to light.</span>
                           </p>
                      </div>
                       <div class="feature-card p-6 rounded-xl">
                           <h4 class="font-bold text-lg text-blue-300 mb-2">
                                 <span data-lang-ru>5. Архитектура, управляемая событиями</span>
                                 <span data-lang-en>5. Event-Driven Architecture</span>
                           </h4>
                           <p>
                                 <span data-lang-ru>В основе проекта лежит гибкая архитектура, где компоненты общаются через систему событий (`Action`). Это обеспечивает низкую связанность кода и упрощает добавление новых механик.</span>
                                 <span data-lang-en>The project is based on a flexible architecture where components communicate via an event system (`Action`), ensuring low code coupling and easy addition of new mechanics.</span>
                           </p>
                      </div>
                       <div class="feature-card p-6 rounded-xl">
                           <h4 class="font-bold text-lg text-blue-300 mb-2">
                                 <span data-lang-ru>6. Физически-корректное взаимодействие</span>
                                 <span data-lang-en>6. Physics-Based Interaction</span>
                           </h4>
                           <p>
                                 <span data-lang-ru>Особое внимание уделено ощущению "веса". Движение управляется через `Rigidbody2D` с инерцией, а оружие генерирует физический импульс (`blowbackForce`), который толкает персонажа назад.</span>
                                 <span data-lang-en>Special attention is paid to the feeling of "weight". Movement is controlled via `Rigidbody2D` with inertia, and weapons generate a physical impulse (`blowbackForce`) that pushes the character back.</span>
                           </p>
                      </div>
                 </div>
                <div class="mt-8">
                    <h4 class="text-xl font-bold text-center text-white mb-4">
                        <span data-lang-ru>Шейдеры</span>
                        <span data-lang-en>Shaders</span>
                    </h4>
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                        <div class="gallery-item">
                            <div class="image-container" style="padding-top: 56.25%;"><img class="lazy-image" src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-src="img/SH4_Shield.png" alt="Изображение проекта Holodog"></div>
                        </div>
                        <div class="video-container video-placeholder" data-video-ids="iMwMMa9qOFY">
                             <img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-src="https://img.youtube.com/vi/iMwMMa9qOFY/hqdefault.jpg" alt="Holodog Shader Preview" class="lazy-image video-thumbnail">
                             <div class="play-button"></div>
                        </div>
                    </div>
                </div>
            </section>
            
            <hr class="divider">
            
            <!-- GALLERY SECTION -->
            <section class="mb-16">
                  <h2 class="section-title">
                       <span data-lang-ru>Галерея</span>
                       <span data-lang-en>Gallery</span>
                  </h2>
                  <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6">
                       <!-- Gallery Item 1 -->
                       <div class="gallery-item">
                           <div class="image-container"><img class="lazy-image" src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-src="img/Bark.jpg" alt="Bark Material Render"></div>
                           <div class="texture-maps-container">
                               <div class="texture-map" data-src="img/Bark_normal.jpg"><img src="img/Bark_normal.jpg" alt="Normal Map"></div>
                               <div class="texture-map" data-src="img/Bark_ao.jpg"><img src="img/Bark_ao.jpg" alt="AO Map"></div>
                               <div class="texture-map" data-src="img/Bark_roughness.jpg"><img src="img/Bark_roughness.jpg" alt="Roughness Map"></div>
                               <div class="texture-map" data-src="img/Bark_basecolor.jpg"><img src="img/Bark_basecolor.jpg" alt="Color Map"></div>
                               <div class="texture-map" data-src="img/Bark_height.jpg"><img src="img/Bark_height.jpg" alt="Height Map"></div>
                           </div>
                       </div>
                       <!-- Gallery Item 2 -->
                       <div class="gallery-item">
                           <div class="image-container"><img class="lazy-image" src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-src="img/Brick_1.jpg" alt="Brick Material Render"></div>
                           <div class="texture-maps-container">
                               <div class="texture-map" data-src="img/Brick_1_normal.jpg"><img src="img/Brick_1_normal.jpg" alt="Normal Map"></div>
                               <div class="texture-map" data-src="img/Brick_1_ambientocclusion.jpg"><img src="img/Brick_1_ambientocclusion.jpg" alt="AO Map"></div>
                               <div class="texture-map" data-src="img/Brick_1_roughness.jpg"><img src="img/Brick_1_roughness.jpg" alt="Roughness Map"></div>
                               <div class="texture-map" data-src="img/Brick_1_basecolor.jpg"><img src="img/Brick_1_basecolor.jpg" alt="Color Map"></div>
                               <div class="texture-map" data-src="img/Brick_1_height.jpg"><img src="img/Brick_1_height.jpg" alt="Height Map"></div>
                           </div>
                       </div>
                       <!-- Gallery Item 3 -->
                       <div class="gallery-item">
                           <div class="image-container"><img class="lazy-image" src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-src="img/OrnateFabric.jpeg" alt="Ornate Fabric Material Render"></div>
                           <div class="texture-maps-container">
                               <div class="texture-map" data-src="img/OrnateFabric_normal.jpg"><img src="img/OrnateFabric_normal.jpg" alt="Normal Map"></div>
                               <div class="texture-map" data-src="img/OrnateFabric_ambientocclusion.jpg"><img src="img/OrnateFabric_ambientocclusion.jpg" alt="AO Map"></div>
                               <div class="texture-map" data-src="img/OrnateFabric_roughness.jpg"><img src="img/OrnateFabric_roughness.jpg" alt="Roughness Map"></div>
                               <div class="texture-map" data-src="img/OrnateFabric_basecolor.jpg"><img src="img/OrnateFabric_basecolor.jpg" alt="Color Map"></div>
                               <div class="texture-map" data-src="img/OrnateFabric_height.jpg"><img src="img/OrnateFabric_height.jpg" alt="Height Map"></div>
                               <div class="texture-map" data-src="img/OrnateFabric_metallic.jpg"><img src="img/OrnateFabric_metallic.jpg" alt="Metallic Map"></div>
                               <div class="texture-map" data-src="img/OrnateFabric_translucensy.jpg"><img src="img/OrnateFabric_translucensy.jpg" alt="Translucensy Map"></div>
                           </div>
                       </div>
                       <!-- Gallery Item 4 -->
                       <div class="gallery-item">
                           <div class="image-container"><img class="lazy-image" src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-src="img/BrokenTiles.jpg" alt="Broken Tiles Material Render"></div>
                           <div class="texture-maps-container">
                               <div class="texture-map" data-src="img/Broken_Tiles_normal.jpg"><img src="img/Broken_Tiles_normal.jpg" alt="Normal Map"></div>
                               <div class="texture-map" data-src="img/Broken_Tiles_ambientocclusion.jpg"><img src="img/Broken_Tiles_ambientocclusion.jpg" alt="AO Map"></div>
                               <div class="texture-map" data-src="img/Broken_Tiles_roughness.jpg"><img src="img/Broken_Tiles_roughness.jpg" alt="Roughness Map"></div>
                               <div class="texture-map" data-src="img/Broken_Tiles_basecolor.jpg"><img src="img/Broken_Tiles_basecolor.jpg" alt="Color Map"></div>
                               <div class="texture-map" data-src="img/Broken_Tiles_height.jpg"><img src="img/Broken_Tiles_height.jpg" alt="Height Map"></div>
                           </div>
                       </div>
                       <!-- Gallery Item 5 -->
                       <div class="gallery-item">
                           <div class="image-container"><img class="lazy-image" src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-src="img/Render_1.png" alt="Описание рендера 2"></div>
                       </div>
                       <!-- Gallery Item 6 -->
                       <div class="gallery-item">
                           <div class="image-container"><img class="lazy-image" src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-src="img/Render_2.png" alt="Описание графа шейдера"></div>
                       </div>
                  </div>
                  <div class="grid grid-cols-1 sm:grid-cols-2 gap-6 mt-6">
                      <div class="gallery-item">
                          <div class="image-container" style="padding-top: 56.25%;">
                              <img class="lazy-image" src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-src="img/Pixel_1.png" alt="Дополнительное изображение 1">
                          </div>
                      </div>
                      <div class="gallery-item">
                          <div class="image-container" style="padding-top: 56.25%;">
                              <img class="lazy-image" src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-src="img/Pixel_2.png" alt="Дополнительное изображение 2">
                          </div>
                      </div>
                  </div>
                  <!-- Music Player as last item in gallery -->
                  <div class="col-span-1 sm:col-span-2 lg:col-span-3 mt-10 flex justify-center">
                      <div class="music-player-wrapper">
                          <div class="music-container" id="music-container">
                              <div class="background-effect">
                                  <img id="cover-bg" src="" alt="Album Art Background" />
                              </div>
                              <div class="img-container">
                                  <img src="" alt="Album Cover" id="cover" />
                              </div>
                              <div class="player-controls">
                                  <div class="music-info">
                                      <h2 id="title" class="title"></h2>
                                  </div>
                                  <div class="progress-container" id="progress-container">
                                      <div class="progress" id="progress"></div>
                                  </div>
                                  <div class="navigation">
                                      <button id="prev" class="action-btn">
                                          <i class="fas fa-backward"></i>
                                      </button>
                                      <button id="play" class="action-btn action-btn-big">
                                          <i class="fas fa-play"></i>
                                      </button>
                                      <button id="next" class="action-btn">
                                          <i class="fas fa-forward"></i>
                                      </button>
                                  </div>
                              </div>
                              <audio id="audio" crossorigin="anonymous"></audio>
                          </div>
                      </div>
                  </div>
            </section>
            
            <hr class="divider">

            <!-- CONTRACT WORK SECTION -->
            <section class="mb-16">
                  <h2 class="section-title">
                       <span data-lang-ru>Контрактная работа</span>
                       <span data-lang-en>Contract Work</span>
                  </h2>
                <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-2 gap-6">
                    <!-- Bit Blast Zero -->
                    <div class="cv-card">
                        <div class="video-container mb-4 video-placeholder" data-video-ids="pEYhLY0KeFg,CibIFGiDiwM">
                             <img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-src="https://img.youtube.com/vi/CibIFGiDiwM/hqdefault.jpg" alt="Bit Blast Zero Preview" class="lazy-image video-thumbnail">
                             <div class="play-button"></div>
                        </div>
                        <h4 class="text-lg font-bold text-white"><span data-lang-ru>Blast Bit Zero</span><span data-lang-en>Blast Bit Zero</span></h4>
                        <p class="text-gray-400 text-sm"><span data-lang-ru>Разработал бесконечный shoot 'em up. Ключевой особенностью проекта является кастомная система на базе Scriptable Objects, которая значительно упрощает и ускоряет создание новых волн противников и боссов.</span><span data-lang-en>Developed an endless shoot 'em up. The project's core feature is a custom system based on Scriptable Objects, designed to significantly simplify and accelerate the creation of new enemy waves and bosses.</span></p>
                    </div>
                    <!-- Temple of Patience -->
                    <div class="cv-card">
                        <div class="video-container mb-4 video-placeholder" data-video-ids="19y2TDY3Myw">
                             <img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-src="https://img.youtube.com/vi/19y2TDY3Myw/hqdefault.jpg" alt="Temple of Patience Preview" class="lazy-image video-thumbnail">
                             <div class="play-button"></div>
                        </div>
                        <h4 class="text-lg font-bold text-white"><span data-lang-ru>Temple of Patience</span><span data-lang-en>Temple of Patience</span></h4>
                        <p class="text-gray-400 text-sm"><span data-lang-ru>Создал сингл-скрин платформер. Основной задачей была разработка архитектуры на основе тайловых карт и префабов, позволяющей собирать новые уровни прямо в редакторе Unity за считанные минуты.</span><span data-lang-en>Created a single-screen platformer. The main goal was to develop an architecture using tilemaps and nested prefabs, enabling the assembly of new levels directly in the Unity editor in minutes.</span></p>
                    </div>
                    <!-- Argon Flight -->
                    <div class="cv-card">
                        <div class="video-container mb-4 video-placeholder" data-video-ids="PdigEk_1eV8">
                             <img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-src="https://img.youtube.com/vi/PdigEk_1eV8/hqdefault.jpg" alt="Argon Flight Preview" class="lazy-image video-thumbnail">
                             <div class="play-button"></div>
                        </div>
                        <h4 class="text-lg font-bold text-white"><span data-lang-ru>Argon Flight</span><span data-lang-en>Argon Flight</span></h4>
                        <p class="text-gray-400 text-sm"><span data-lang-ru>Разработал короткий рельсовый шутер, стилистически вдохновлённый техно-демо 90-х. В основе проекта лежит система событий, привязанных к таймлайну, которая управляет всеми игровыми моментами.</span><span data-lang-en>Developed a short on-rails shooter, stylistically inspired by 90s tech demos. The project is built upon a timeline-based event system that drives all in-game moments.</span></p>
                    </div>
                    <!-- Don't press X -->
                    <div class="cv-card">
                        <div class="video-container mb-4 video-placeholder" data-video-ids="AjCEn4VBokU">
                             <img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-src="https://img.youtube.com/vi/AjCEn4VBokU/hqdefault.jpg" alt="Don't press X Preview" class="lazy-image video-thumbnail">
                             <div class="play-button"></div>
                        </div>
                        <h4 class="text-lg font-bold text-white"><span data-lang-ru>Don't press X to free the pirate</span><span data-lang-en>Don't press X to free the pirate</span></h4>
                        <p class="text-gray-400 text-sm"><span data-lang-ru>Создал сатирическую мета-игру, построенную вокруг простой концепции: не нажимать кнопку Х. Основной технической задачей стала разработка гибкой системы ветвящихся диалогов на Scriptable Objects, включающей озвучку каждого печатаемого символа.</span><span data-lang-en>Created a satirical meta-game built around a simple concept: don't press X. The main technical challenge was developing a flexible, branching dialogue system using Scriptable Objects, which included per-character audio feedback as text is typed.</span></p>
                    </div>
                    <!-- Dissolve Feature -->
                    <div class="cv-card">
                        <div class="video-container mb-4 video-placeholder" data-video-ids="Yq5r_JC4H2Q,ildYX8BSKlQ,sm_MsfI60jE">
                             <img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-src="https://img.youtube.com/vi/Yq5r_JC4H2Q/hqdefault.jpg" alt="Dissolve Feature Preview" class="lazy-image video-thumbnail">
                             <div class="play-button"></div>
                        </div>
                        <h4 class="text-lg font-bold text-white"><span data-lang-ru>Рендер-фича: Dissolve Effect</span><span data-lang-en>Render Feature: Dissolve Effect</span></h4>
                        <p class="text-gray-400 text-sm"><span data-lang-ru>Разработал кастомную рендер-фичу (URP Render Feature) для создания эффекта, имитирующего датамошинг, который "распыляет" пиксели предыдущего кадра на текущий. Дополнительно реализовал ряд других шейдерных эффектов.</span><span data-lang-en>Developed a custom URP Render Feature to create a datamoshing-inspired effect that "atomizes" pixels from the previous frame onto the current one. Additionally implemented several other shader effects.</span></p>
                    </div>
                    <!-- Mobile Game Effects -->
                    <div class="cv-card">
                        <div class="video-container mb-4 video-placeholder" data-video-ids="vInap1vfovQ,HjkhupE7mMw,EWbRH-CbFwI,JtkUp9m-JUg">
                             <img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-src="https://img.youtube.com/vi/vInap1vfovQ/hqdefault.jpg" alt="Mobile Game Effects Preview" class="lazy-image video-thumbnail">
                             <div class="play-button"></div>
                        </div>
                        <h4 class="text-lg font-bold text-white"><span data-lang-ru>Эффекты для мобильной игры</span><span data-lang-en>Effects for a Mobile Game</span></h4>
                        <p class="text-gray-400 text-sm"><span data-lang-ru>Разработал серию эффектов частиц, оптимизированных для работы без VFX Graph. Управление параметрами Shuriken реализовано через передачу данных в кастомных UV-каналах для высокой производительности.</span><span data-lang-en>Developed a series of particle effects optimized to run without VFX Graph. Instead, Shuriken parameters are controlled by passing data through custom UV channels, ensuring high performance.</span></p>
                    </div>
                    <!-- VR Features -->
                    <div class="cv-card">
                        <div class="video-container mb-4 video-placeholder" data-video-ids="HsWOmk55LDw">
                             <img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-src="https://img.youtube.com/vi/HsWOmk55LDw/hqdefault.jpg" alt="VR Features Preview" class="lazy-image video-thumbnail">
                             <div class="play-button"></div>
                        </div>
                        <h4 class="text-lg font-bold text-white"><span data-lang-ru>Разработка фичей для VR</span><span data-lang-en>VR Feature Development</span></h4>
                        <p class="text-gray-400 text-sm"><span data-lang-ru>Реализовал комплекс фичей для VR-проекта: высокооптимизированные шейдеры, кастомную физическую систему для интерактивных объектов (двери, ящики) и ивентовую систему SFX на Scriptable Objects.</span><span data-lang-en>Implemented a suite of features for a VR project: highly-optimized shaders, a custom physics-based interaction system for objects like doors and drawers, and an event-driven SFX management system using Scriptable Objects.</span></p>
                    </div>
                    <!-- VFX Graph Explosion -->
                    <div class="cv-card">
                        <div class="video-container mb-4 video-placeholder" data-video-ids="snpor-cynDA,ECA9xlg1N1o">
                             <img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-src="https://img.youtube.com/vi/c_3WGAYfRww/hqdefault.jpg" alt="VFX Graph Explosion Preview" class="lazy-image video-thumbnail">
                             <div class="play-button"></div>
                        </div>
                        <h4 class="text-lg font-bold text-white"><span data-lang-ru>Настраиваемый взрыв (VFX Graph)</span><span data-lang-en>Configurable Explosion (VFX Graph)</span></h4>
                        <p class="text-gray-400 text-sm"><span data-lang-ru>Создал конфигурируемый эффект взрыва при помощи VFX Graph как гибкий ассет с множеством вынесенных параметров (цвет, размер, интенсивность) для легкой кастомизации.</span><span data-lang-en>Created a configurable explosion effect using VFX Graph, designed as a flexible asset with numerous exposed parameters (e.g., color, size, intensity) for easy customization.</span></p>
                    </div>
                </div>
            </section>

            <hr class="divider">
            
            <!-- GAME SECTION -->
            <section>
                <h2 class="section-title">
                    <span data-lang-ru>Пока вы думаете...</span>
                    <span data-lang-en>While you're thinking...</span>
                </h2>
                <div id="game-container">
                    <canvas id="game-canvas" width="800" height="200"></canvas>
                    <div id="game-score">
                        <span data-lang-ru>Счет: </span>
                        <span data-lang-en>Score: </span>
                        <span id="score-value">0</span>
                    </div>
                    <div id="game-message"></div>
                </div>
                 <p class="text-center mt-4 text-gray-500">
                      <span data-lang-ru>Нажмите Пробел или тапните, чтобы прыгнуть</span>
                      <span data-lang-en>Press Space or tap to jump</span>
                 </p>
            </section>
        </main>
    </div>

    <!-- Lightbox HTML (for image popups) -->
    <div id="lightbox" class="fixed inset-0 bg-black bg-opacity-80 flex items-center justify-center p-4 z-50 opacity-0 pointer-events-none">
        <img id="lightbox-image" src="" alt="Full size view" class="max-w-full max-h-full object-contain transform scale-95">
        <button id="lightbox-close" class="absolute top-4 right-4 text-white text-4xl">&times;</button>
    </div>


    <!-- JAVASCRIPT SECTION -->
    <script>
        document.addEventListener('DOMContentLoaded', function () {
            
            // --- LANGUAGE SWITCHER LOGIC ---
            const langRuBtn = document.getElementById('lang-ru');
            const langEnBtn = document.getElementById('lang-en');
            const ruElements = document.querySelectorAll('[data-lang-ru]');
            const enElements = document.querySelectorAll('[data-lang-en]');
            const pdfLink = document.getElementById('pdf-download-link');
            let game; 

            function setLanguage(lang) {
                if (lang === 'ru') {
                    document.documentElement.lang = 'ru';
                    langRuBtn.classList.add('active');
                    langEnBtn.classList.remove('active');
                    ruElements.forEach(el => el.style.display = 'inline');
                    enElements.forEach(el => el.style.display = 'none');
                    pdfLink.href = "https://drive.google.com/file/d/1ujl4cVXbIkmneiG2MkETweDqvVGsTAzF/view?usp=sharing";
                } else { // 'en' or any other default
                    document.documentElement.lang = 'en';
                    langEnBtn.classList.add('active');
                    langRuBtn.classList.remove('active');
                    enElements.forEach(el => el.style.display = 'inline');
                    ruElements.forEach(el => el.style.display = 'none');
                    pdfLink.href = "https://drive.google.com/file/d/1zvjyhmnlUGAVbTp30eHBmQENS-uUoqLV/view?usp=sharing";
                }
                if(game) game.setLanguage(lang);
            }

            langRuBtn.addEventListener('click', () => setLanguage('ru'));
            langEnBtn.addEventListener('click', () => setLanguage('en'));
            
            // --- LIGHTBOX (IMAGE POPUP) LOGIC ---
            const lightbox = document.getElementById('lightbox');
            const lightboxImage = document.getElementById('lightbox-image');
            const lightboxClose = document.getElementById('lightbox-close');
            
            function openLightbox(srcElement) {
                const highResSrc = srcElement.dataset && srcElement.dataset.src ? srcElement.dataset.src : srcElement.src;
                lightboxImage.src = highResSrc;
                lightbox.classList.remove('opacity-0', 'pointer-events-none');
                setTimeout(() => {
                    lightboxImage.classList.remove('scale-95');
                }, 10);
            }

            function closeLightbox() {
                lightboxImage.classList.add('scale-95');
                lightbox.classList.add('opacity-0', 'pointer-events-none');
            }

            document.querySelectorAll('.gallery-item').forEach(item => {
                item.addEventListener('click', (e) => {
                    if (e.target.closest('.texture-map')) {
                        return;
                    }
                    const img = item.querySelector('img');
                    openLightbox(img);
                });
            });

            document.querySelectorAll('.texture-map').forEach(map => {
                map.addEventListener('click', (e) => {
                    e.stopPropagation();
                    const imgSrc = map.dataset.src;
                    openLightbox({ dataset: { src: imgSrc } });
                });
            });

            lightboxClose.addEventListener('click', closeLightbox);
            lightbox.addEventListener('click', (e) => {
                if (e.target === lightbox) {
                    closeLightbox();
                }
            });

            // --- VIDEO LAZY LOADING LOGIC ---
            function loadVideo(placeholder) {
                if (placeholder.classList.contains('video-loaded')) return;

                const videoIds = placeholder.dataset.videoIds;
                if (!videoIds) return;

                const firstVideoId = videoIds.split(',')[0];
                const playlist = videoIds; 

                const iframe = document.createElement('iframe');
                iframe.src = `https://www.youtube.com/embed/${firstVideoId}?autoplay=1&loop=1&playlist=${playlist}&mute=1&controls=1&enablejsapi=1`;
                iframe.title = "YouTube video player";
                iframe.frameBorder = "0";
                iframe.allow = "accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture";
                iframe.allowFullscreen = true;

                while (placeholder.firstChild) {
                    placeholder.removeChild(placeholder.firstChild);
                }
                placeholder.appendChild(iframe);
                placeholder.classList.add('video-loaded');
            }
            
            function resetVideo(placeholder) {
                if (!placeholder.classList.contains('video-loaded')) return;

                const videoIds = placeholder.dataset.videoIds;
                if (!videoIds) return;

                const firstVideoId = videoIds.split(',')[0];
                
                while (placeholder.firstChild) {
                    placeholder.removeChild(placeholder.firstChild);
                }

                const thumbnail = document.createElement('img');
                thumbnail.src = "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7";
                thumbnail.dataset.src = `https://img.youtube.com/vi/${firstVideoId}/hqdefault.jpg`;
                thumbnail.alt = "Video Preview";
                thumbnail.className = 'lazy-image video-thumbnail';

                const playButton = document.createElement('div');
                playButton.className = 'play-button';

                placeholder.appendChild(thumbnail);
                placeholder.appendChild(playButton);
                
                imageObserver.observe(thumbnail);

                placeholder.classList.remove('video-loaded');
            }

            const videoObserver = new IntersectionObserver((entries, observer) => {
                entries.forEach(entry => {
                    if (entry.isIntersecting) {
                        loadVideo(entry.target);
                    } else {
                        resetVideo(entry.target);
                    }
                });
            }, { root: null, rootMargin: '0px', threshold: 0.5 });

            document.querySelectorAll('.video-placeholder').forEach(placeholder => {
                videoObserver.observe(placeholder);
            });

            // --- LAZY LOADING FOR ALL OTHER IMAGES ---
            const lazyImages = document.querySelectorAll('.lazy-image');

            const imageObserver = new IntersectionObserver((entries, observer) => {
                entries.forEach(entry => {
                    if (entry.isIntersecting) {
                        const img = entry.target;
                        const highResSrc = img.dataset.src;

                        if (!highResSrc) return;

                        const tempImage = new Image();
                        tempImage.src = highResSrc;
                        
                        tempImage.onload = () => {
                            img.src = highResSrc;
                            img.classList.add('loaded');
                        };
                        
                        tempImage.onerror = () => {
                            console.error(`Failed to load image: ${highResSrc}`);
                            img.classList.add('loaded');
                        }

                        observer.unobserve(img);
                    }
                });
            }, {
                rootMargin: '0px 0px 250px 0px'
            });

            lazyImages.forEach(img => {
                imageObserver.observe(img);
            });
            
            // --- MUSIC PLAYER & VISUALIZER LOGIC ---
            const musicContainer = document.getElementById("music-container");
            const playButton = document.getElementById("play");
            const prevButton = document.getElementById("prev");
            const nextButton = document.getElementById("next");
            const audio = document.getElementById("audio");
            const progress = document.getElementById("progress");
            const progressContainer = document.getElementById("progress-container");
            const title = document.getElementById("title");
            const cover = document.getElementById("cover");
            const coverBg = document.getElementById("cover-bg");
            
            let audioContext, analyser, sourceNode, dataArray;
            let isAudioContextInitialized = false;
            let smoothedIntensity = 0;
            let visualizerFrameId;

            const songs = [
                { name: 'The Industrial Pulse', audioSrc: 'https://raw.githubusercontent.com/Okamisen2/portfolio/main/Music/The%20Industrial%20Pulse.mp3', coverSrc: 'https://raw.githubusercontent.com/Okamisen2/portfolio/main/Music/pulse.png' },
                { name: 'Village Twilight', audioSrc: 'https://raw.githubusercontent.com/Okamisen2/portfolio/main/Music/Village%20Twilight.mp3', coverSrc: 'https://raw.githubusercontent.com/Okamisen2/portfolio/main/Music/village.png' },
                { name: 'Arcade Fury', audioSrc: 'https://raw.githubusercontent.com/Okamisen2/portfolio/main/Arcade%20Fury.mp3', coverSrc: 'https://raw.githubusercontent.com/Okamisen2/portfolio/main/arcade.png' },
                { name: 'Crimson Repose', audioSrc: 'https://raw.githubusercontent.com/Okamisen2/portfolio/main/Crimson%20Repose.mp3', coverSrc: 'https://raw.githubusercontent.com/Okamisen2/portfolio/main/crimson.png' },
                { name: 'Data Stream Center', audioSrc: 'https://raw.githubusercontent.com/Okamisen2/portfolio/main/Data%20Stream%20Center.mp3', coverSrc: 'https://raw.githubusercontent.com/Okamisen2/portfolio/main/data.png' },
                { name: 'The Lich\'s Workshop', audioSrc: 'https://raw.githubusercontent.com/Okamisen2/portfolio/main/The%20Lich\'s%20Workshop.mp3', coverSrc: 'https://raw.githubusercontent.com/Okamisen2/portfolio/main/lich.png' },
                { name: 'Mountain Monastery', audioSrc: 'https://raw.githubusercontent.com/Okamisen2/portfolio/main/Mountain%20Monastery.mp3', coverSrc: 'https://raw.githubusercontent.com/Okamisen2/portfolio/main/monastery.png' },
                { name: 'Castle Workshop', audioSrc: 'https://raw.githubusercontent.com/Okamisen2/portfolio/main/Music/Castle%20Workshop.mp3', coverSrc: 'https://raw.githubusercontent.com/Okamisen2/portfolio/main/Music/castle.png' },
                { name: 'Bullet Ballet', audioSrc: 'https://raw.githubusercontent.com/Okamisen2/portfolio/main/Music/Bullet%20Ballet.mp3', coverSrc: 'https://raw.githubusercontent.com/Okamisen2/portfolio/main/Music/bullet.png' },
                { name: 'Dance dance Magic', audioSrc: 'https://raw.githubusercontent.com/Okamisen2/portfolio/main/Music/Dance%20dance%20magic.mp3', coverSrc: 'https://raw.githubusercontent.com/Okamisen2/portfolio/main/Music/dance.png' },
                { name: 'We\'ve Always Been Here', audioSrc: 'https://raw.githubusercontent.com/Okamisen2/portfolio/main/Music/We\'ve%20Always%20Been%20Here.mp3', coverSrc: 'https://raw.githubusercontent.com/Okamisen2/portfolio/main/Music/always.png' },
                { name: 'The System Collapse', audioSrc: 'https://raw.githubusercontent.com/Okamisen2/portfolio/main/Music/The%20System%20Collapse.mp3', coverSrc: 'https://raw.githubusercontent.com/Okamisen2/portfolio/main/Music/collapse.png' }
            ];
            let songIndex = 0;

            function initAudioVisualizer() {
                if (isAudioContextInitialized) return;
                audioContext = new (window.AudioContext || window.webkitAudioContext)();
                analyser = audioContext.createAnalyser();
                analyser.fftSize = 256;
                sourceNode = audioContext.createMediaElementSource(audio);
                sourceNode.connect(analyser);
                analyser.connect(audioContext.destination);
                dataArray = new Uint8Array(analyser.frequencyBinCount);
                isAudioContextInitialized = true;
            }
            
            function visualizerLoop() {
                analyser.getByteFrequencyData(dataArray);

                let sum = 0;
                for (let i = 0; i < dataArray.length / 2; i++) {
                    sum += dataArray[i];
                }
                let average = sum / (dataArray.length / 2);
                
                smoothedIntensity += (average - smoothedIntensity) * 0.7;

                const mappedOpacity = 0.1 + (smoothedIntensity / 255) * 0.9;
                
                musicContainer.style.setProperty('--audio-intensity', mappedOpacity);

                visualizerFrameId = requestAnimationFrame(visualizerLoop);
            }

            function loadSong(songData) {
                title.innerText = songData.name;
                audio.src = songData.audioSrc;
                
                // --- Updated Crossfade logic for BOTH covers ---
                cover.classList.add('cover-fade');
                coverBg.classList.add('cover-bg-fade');
                
                setTimeout(() => {
                    cover.src = songData.coverSrc;
                    coverBg.src = songData.coverSrc;
                    
                    const tempImg = new Image();
                    tempImg.src = songData.coverSrc;
                    tempImg.onload = () => {
                        cover.classList.remove('cover-fade');
                        coverBg.classList.remove('cover-bg-fade');
                    };
                }, 1500);
            }

            function playSong() {
                if (!isAudioContextInitialized) {
                    initAudioVisualizer();
                }
                musicContainer.classList.add("play");
                playButton.querySelector("i.fas").classList.remove("fa-play");
                playButton.querySelector("i.fas").classList.add("fa-pause");
                audio.play();

                if (visualizerFrameId) cancelAnimationFrame(visualizerFrameId);
                visualizerLoop();
            }

            function pauseSong() {
                musicContainer.classList.remove("play");
                playButton.querySelector("i.fas").classList.remove("fa-pause");
                playButton.querySelector("i.fas").classList.add("fa-play");
                audio.pause();
                
                cancelAnimationFrame(visualizerFrameId);
            }

            function prevSong() {
                songIndex--;
                if (songIndex < 0) songIndex = songs.length - 1;
                loadSong(songs[songIndex]);
                playSong();
            }

            function nextSong() {
                songIndex++;
                if (songIndex > songs.length - 1) songIndex = 0;
                loadSong(songs[songIndex]);
                playSong();
            }

            function updateProgress(e) {
                const { duration, currentTime } = e.srcElement;
                if (duration) {
                    const progressPercent = (currentTime / duration) * 100;
                    progress.style.width = `${progressPercent}%`;
                }
            }

            function setProgress(e) {
                const width = this.clientWidth;
                const clickX = e.offsetX;
                const duration = audio.duration;
                if (duration) {
                    audio.currentTime = (clickX / width) * duration;
                }
            }

            playButton.addEventListener("click", () => {
                const isPlaying = musicContainer.classList.contains("play");
                isPlaying ? pauseSong() : playSong();
            });

            prevButton.addEventListener("click", prevSong);
            nextButton.addEventListener("click", nextSong);
            audio.addEventListener("timeupdate", updateProgress);
            progressContainer.addEventListener("click", setProgress);
            audio.addEventListener("ended", nextSong);
            
            loadSong(songs[songIndex]);

            // --- GAME LOGIC ---
            const canvas = document.getElementById('game-canvas');
            const ctx = canvas.getContext('2d');
            const scoreEl = document.getElementById('score-value');
            const messageEl = document.getElementById('game-message');

            class DinoGame {
                constructor() {
                    this.canvas = canvas;
                    this.ctx = ctx;
                    this.scoreEl = scoreEl;
                    this.messageEl = messageEl;
                    this.initialGameSpeed = 4;
                    this.gameSpeedIncrease = 0.001;
                    this.animationFrameId = null;
                    this.lang = 'en';
                    this.phrases = {
                        ru: ["Молодец!", "Так держать!", "Отлично!", "Невероятно!", "Супер!", "Продолжай!"],
                        en: ["Great!", "Keep it up!", "Excellent!", "Incredible!", "Super!", "Go on!"]
                    };
                    this.specialPhrase = {
                        ru: "Окей, напиши мне с фразой 100, обсудим кое-чего.",
                        en: "Okay, message me with the phrase 100, let's discuss something."
                    };
                }

                setLanguage(lang) { this.lang = lang; }
                getRandomInterval() { return Math.floor(Math.random() * (this.maxObstacleInterval - this.minObstacleInterval + 1)) + this.minObstacleInterval; }
                jump() { if (this.dino.onGround) { this.dino.dy = this.dino.jumpPower; this.dino.onGround = false; } }
                showMessage(text) {
                    this.messageEl.textContent = text;
                    this.messageEl.style.opacity = 1;
                    setTimeout(() => { this.messageEl.style.opacity = 0; }, 2000);
                }
                
                update() {
                    if (this.gameOver) return;
                    this.gameSpeed += this.gameSpeedIncrease;

                    this.dino.dy += this.dino.gravity;
                    this.dino.y += this.dino.dy;
                    this.dino.onGround = false;
                    if (this.dino.y >= this.canvas.height - 10 - this.dino.height) {
                        this.dino.y = this.canvas.height - 10 - this.dino.height;
                        this.dino.dy = 0;
                        this.dino.onGround = true;
                    }

                    this.obstacleTimer++;
                    if (this.obstacleTimer > this.currentObstacleInterval) {
                        this.obstacles.push({ x: this.canvas.width, width: 20, height: 40 });
                        this.obstacleTimer = 0;
                        this.currentObstacleInterval = this.getRandomInterval();
                    }

                    for (let i = this.obstacles.length - 1; i >= 0; i--) {
                        const obs = this.obstacles[i];
                        obs.x -= this.gameSpeed;
                        
                        const dinoRight = this.dino.x + this.dino.width;
                        const dinoBottom = this.dino.y + this.dino.height;
                        const obstacleRight = obs.x + obs.width;
                        const obstacleTop = this.canvas.height - obs.height - 10;

                        if (dinoRight > obs.x && this.dino.x < obstacleRight && dinoBottom > obstacleTop && this.dino.y < this.canvas.height - 10) {
                            this.endGame();
                        }

                        if (obs.x + obs.width < this.dino.x && !obs.scored) {
                            obs.scored = true;
                            this.score++;
                            this.jumps++;
                            this.scoreEl.textContent = this.score;
                            if (this.jumps === 100) {
                                this.showMessage(this.specialPhrase[this.lang]);
                            } else if (this.jumps > 0 && this.jumps % 10 === 0) {
                                const randomPhrase = this.phrases[this.lang][Math.floor(Math.random() * this.phrases[this.lang].length)];
                                this.showMessage(randomPhrase);
                            }
                        }

                        if (obs.x + obs.width < 0) {
                            this.obstacles.splice(i, 1);
                        }
                    }
                }
                
                draw() {
                    this.ctx.clearRect(0, 0, this.canvas.width, this.canvas.height);
                    this.ctx.fillStyle = '#374151';
                    this.ctx.fillRect(0, this.canvas.height - 10, this.canvas.width, 10);
                    this.ctx.fillStyle = '#d1d5db';
                    this.ctx.fillRect(this.dino.x, this.dino.y, this.dino.width, this.dino.height);
                    this.ctx.fillStyle = '#f87171';
                    this.obstacles.forEach(obs => {
                        this.ctx.fillRect(obs.x, this.canvas.height - obs.height - 10, obs.width, obs.height);
                    });
                    
                    if(this.gameOver) {
                        this.ctx.fillStyle = 'rgba(0,0,0,0.5)';
                        this.ctx.fillRect(0,0, this.canvas.width, this.canvas.height);
                        this.ctx.fillStyle = 'white';
                        this.ctx.font = '30px Inter';
                        this.ctx.textAlign = 'center';
                        const restartText = this.lang === 'ru' ? 'Нажмите, чтобы начать заново' : 'Click to restart';
                        this.ctx.fillText(restartText, this.canvas.width / 2, this.canvas.height / 2);
                    }
                }

                loop() {
                    this.update();
                    this.draw();
                    this.animationFrameId = requestAnimationFrame(() => this.loop());
                }
                
                start() {
                    if (this.animationFrameId) {
                        cancelAnimationFrame(this.animationFrameId);
                        this.animationFrameId = null;
                    }
                    this.dino = { x: 50, y: this.canvas.height - 40, width: 30, height: 30, dy: 0, gravity: 0.6, jumpPower: -12, onGround: true };
                    this.obstacles = [];
                    this.score = 0;
                    this.jumps = 0;
                    this.scoreEl.textContent = '0';
                    this.gameOver = false;
                    this.gameSpeed = this.initialGameSpeed;
                    this.obstacleTimer = 0;
                    this.minObstacleInterval = 50;
                    this.maxObstacleInterval = 120;
                    this.currentObstacleInterval = this.getRandomInterval();
                    this.loop();
                }

                endGame() {
                    this.gameOver = true;
                    if (this.animationFrameId) {
                        cancelAnimationFrame(this.animationFrameId);
                        this.animationFrameId = null;
                    }
                    this.draw();
                }
            }

            game = new DinoGame();
            game.start();
            setLanguage('en');

            document.addEventListener('keydown', (e) => {
                if (e.code === 'Space') {
                    if (game.gameOver) game.start();
                    else game.jump();
                }
            });
            canvas.addEventListener('click', () => {
                if (game.gameOver) game.start();
                else game.jump();
            });
             canvas.addEventListener('touchstart', (e) => {
                 e.preventDefault();
                 if (game.gameOver) game.start();
                 else game.jump();
             }, { passive: false });

        });
    </script>
</body>
</html>

